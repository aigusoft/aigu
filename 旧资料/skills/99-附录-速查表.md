# 99｜附录 · 速查表

便于在生成或审阅 WCEX 代码时参考的快速索引。

## 99.1 模板绑定语法
| 写法                | 说明与示例                                                           |
| ------------------- | -------------------------------------------------------------------- |
| `$attr="expr"`      | 表达式求值 → 属性：`<div $title="'Hi '+name">`                       |
| `$>`                | 表达式求值 → 文本：`<h1 $>count * 2</h1>`                           |
| `:attr="tmpl"`      | 模板字符串 → 属性：`<div :title="ID ${id}">`                         |
| `:>`                | 模板字符串 → 文本：`<p :>欢迎 ${user}</p>`                           |
| `$$="var"`          | 双向绑定（默认 `value`/`change`）：`<input $$="form.name">`          |
| `$:="var"`          | 单选绑定（默认 `value`/`change`）：`<input type="radio" $:="pick">`  |
| `$::="var"`         | 多选绑定返回数组：`<input type="checkbox" $::="selected">`           |
| `$if="expr"`        | 条件渲染（移除 DOM）                                                  |
| `$show="expr"`      | 条件显示（保留 DOM）                                                  |
| `$for(item,idx)="source"` | 循环渲染：`<li $for(i)="list">${index} ${value}</li>`           |
| `$cmpt="tag"`       | 动态组件：`<div $cmpt="currentTag"></div>`                           |

## 99.2 生命周期与事件
| 钩子 / 事件          | 调用时机                                     |
| ---------------------| --------------------------------------------- |
| `@create` / `onCreate()` | 组件实例化，尚未渲染                       |
| `@ready` / `onReady()`   | 首次渲染完成                               |
| `@destroy` / `onDestroy()` | 组件移除前                              |
| `@timer.N`            | 每 `N` 毫秒触发一次（默认 1000）            |
| `@router-change`      | 相关路由变化时                              |
| 修饰符                | `.once` `.prevent` `.stop` `.capture` `.self` `.throttle` `.1000` |

## 99.3 Scope API
| API                 | 说明                                                         |
| ------------------- | ------------------------------------------------------------ |
| `$emit(event, detail?, el?)` | 触发事件                                           |
| `$watch(fn, cb)`    | 监听数据变化                                                |
| `$noWatch(obj)`     | 取消对象追踪                                                |
| `$router.go(...)` / `$go` | 路由跳转                                           |
| `$router.route`     | 当前路由状态                                                |
| `$path(rel)`        | 解析资源路径                                                |
| `$color.*`          | 语义色（`pri`/`sec`/`bg` 等）                               |
| `$Colors.switchMode()` | 切换主题                                                |
| `$delay(ms)` / `$next()` | 异步工具                                             |
| `$timer(ms, fn?)`   | 注册自动清理的定时器（`@timer` 即基于此实现）              |
| `$log`              | 彩色日志                                                    |
| `$id.xxx`           | 获取带 `id` 的元素引用                                      |
| `$class.name`       | 查询 Shadow DOM 内指定类名的元素集合                        |
| `$wc` / `$tpl`      | 当前组件的宿主类与模板描述                                  |
| `$loader`           | 模块加载器 `_umdLoader`                                    |
| `$npm`              | 当前页面的 npm 根路径                                      |
| `$waitComponents()` | 等待子组件全部挂载                                        |
| `$monitSize(el, cb)`| 尺寸监听                                                    |

## 99.4 模块声明参数
```html
<meta name="module" pkg="lodash.debounce" cjs preload />
```
- `pkg`：npm 包名。
- `version`：指定版本。
- `url`：自定义源地址。
- `files` / `content`：具体加载文件（分号隔开）。
- `deps`：依赖的模块名（分号隔开）。
- `cjs` / `esm` / `amd` / `eval`：加载模式。
- `preload`：预加载。
- `prefix`：补充子目录前缀。
- `export-name`：命名导出的字段名称。
- `global`：全局变量名称（当库暴露在 `window` 上时使用）。
- `cors`：显式开启/关闭跨域请求（未指定时继承 `<meta name="npm">`）。

## 99.5 CLI 命令
| 命令           | 功能                             | 常用选项                                 |
| -------------- | -------------------------------- | ---------------------------------------- |
| `wcex init`    | 初始化项目                       | `--dir`、`--template`                    |
| `wcex dev`     | 开发服务器 + 热更新             | `--dir`、`--port`、`--host`、`--proxy`   |
| `wcex build`   | 构建发布产物                     | `--dir`、`--pack-dir`                    |
| `wcex pack`    | 打包项目与依赖                   | `--dir`、`--pack-dir`、`--deep`          |
| `wcex test`    | 运行 UI 自动化测试               | `--dir`、`--browser`、`--show`、`--concurrent` |

## 99.6 语义色速览
| 名称      | 说明示例                       |
| --------- | ------------------------------ |
| `pri`     | 主色（Primary）                |
| `pria`    | 主色变体                       |
| `sec`     | 辅色                            |
| `seca`    | 辅色变体                        |
| `bg` / `bgr` | 背景 / 背景反色             |
| `text` / `textr` | 正文色 / 反色           |
| `ok` `warn` `info` `error` | 状态色        |
| 修饰符    | `.lN` (亮度) `.sN` (饱和) `.hN` (色相) `.aN` (透明) |

## 99.7 常用组件标签
| 分类         | 组件示例                                                         |
| ------------ | ---------------------------------------------------------------- |
| 布局         | `<wcex-ui.panel>` `<wcex-ui.tabs>` `<wcex-ui.list>` `<wcex-ui.nav>` |
| 表单         | `<wcex-ui.input>` `<wcex-ui.select>` `<wcex-ui.droplist>`         |
| 展示         | `<wcex-ui.icon>` `<wcex-ui.badge>` `<wcex-ui.marked>` `<wcex-ui.echarts>` |
| 弹层与侧栏   | `$side('component', options)`、`$pop`、`$dialog`                  |
| 编辑与工具   | `<wcex-ui.monaco>` `<wcex-ui.dev>` `<wcex-ui.route>`              |

## 99.8 调试提示
- 在浏览器控制台输入 `WCEX` 查看运行时对象。
- 热更新依赖 `/_hotws` WebSocket；如失效，重启 `wcex dev` 或刷新浏览器。
- `console.log('WCEX_TEST_END')` 用于 `wcex test` 结束信号。
- 在 `localStorage.__DEV` 中写入 `{ "pkgs": { "@wcex/ui": { "enable": true, "hostport": "127.0.0.1:8102" }}}` 可将指定包重定向到本地服务并启用热更新。
- 插件可通过 `WCEX.usePlugins({ name, tplPre, tplParse, wcPre, wcPost, wcApply, wcDestroy, scope })` 注册；优先级使用 `priority` 控制，默认值为 `1`。

此速查表覆盖最常见的语法与命令，可结合前面章节的详细解释在实际项目或自动化生成中引用。

## 智能体提示
- 当需要快速回答语法问题，可直接引用本附录的表格，但要提醒用户详细说明可在对应章节查阅。
- 若用户索要命令列表或模块参数，请指向 99.4/99.5 节，保持回答精简。
- 在调试或热更新相关提问中，可引用 99.8 节的常用操作，让用户快速定位入口。
